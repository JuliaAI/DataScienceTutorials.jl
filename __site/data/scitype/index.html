<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/MLJTutorials/libs/highlight/github.min.css"> <link rel=stylesheet  href="/MLJTutorials/css/franklin.css"> <link rel=stylesheet  href="/MLJTutorials/css/pure.css"> <link rel=stylesheet  href="/MLJTutorials/css/side-menu.css"> <link rel=stylesheet  href="/MLJTutorials/css/extra.css"> <title>Data interpretation: Scientific Types</title> <script src="/MLJTutorials/libs/lunr/lunr.min.js"></script> <script src="/MLJTutorials/libs/lunr/lunr_index.js"></script> <script src="/MLJTutorials/libs/lunr/lunrclient.min.js"></script> <div id=layout > <a href="#menu" id=menuLink  class=menu-link ><span></span></a> <div id=menu > <div class=pure-menu > <a href="/MLJTutorials/" id=menu-logo-link > <div class=menu-logo > <img id=menu-logo  alt="MLJ Logo" src="/MLJTutorials/assets/infra/MLJLogo2.svg" /> <p><strong>MLJ Tutorials</strong></p> </div> </a> <form id=lunrSearchForm  name=lunrSearchForm > <input class=search-input  name=q  placeholder="Enter search term" type=text > <input type=submit  value=Search  formaction="/MLJTutorials/search.html" style="visibility:hidden"> </form> <ul class=pure-menu-list > <li class="pure-menu-item pure-menu-top-item "><a href="/MLJTutorials/" class=pure-menu-link ><strong>Home</strong></a> <li class=pure-menu-sublist-title ><strong>Data basics</strong> <ul class=pure-menu-sublist > <li class="pure-menu-item "><a href="/MLJTutorials/data/loading/" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Loading data</a> <li class="pure-menu-item "><a href="/MLJTutorials/data/dataframe/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Data Frames</a> <li class="pure-menu-item "><a href="/MLJTutorials/data/categorical/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Categorical Arrays</a> <li class="pure-menu-item "><a href="/MLJTutorials/data/scitype/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Scientific Type</a> </ul> <li class=pure-menu-sublist-title ><strong>Getting started</strong> <ul class=pure-menu-sublist > <li class="pure-menu-item "><a href="/MLJTutorials/getting-started/choosing-a-model/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Choosing a model</a> <li class="pure-menu-item "><a href="/MLJTutorials/getting-started/fit-and-predict/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Fit, predict, transform</a> <li class="pure-menu-item "><a href="/MLJTutorials/getting-started/model-tuning/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Model tuning</a> <li class="pure-menu-item "><a href="/MLJTutorials/getting-started/ensembles/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Ensembles</a> <li class="pure-menu-item "><a href="/MLJTutorials/getting-started/ensembles-2/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Ensembles (2)</a> <li class="pure-menu-item "><a href="/MLJTutorials/getting-started/composing-models/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Composing models</a> <li class="pure-menu-item "><a href="/MLJTutorials/getting-started/learning-networks/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Learning networks</a> <li class="pure-menu-item "><a href="/MLJTutorials/getting-started/learning-networks-2/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Learning networks (2)</a> </ul> <li class=pure-menu-sublist-title ><strong>Intro to Stats Learning</strong> <ul class=pure-menu-sublist  id=isl> <li class="pure-menu-item "><a href="/MLJTutorials/isl/lab-2/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Lab 2</a> <li class="pure-menu-item "><a href="/MLJTutorials/isl/lab-3/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Lab 3</a> <li class="pure-menu-item "><a href="/MLJTutorials/isl/lab-4/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Lab 4</a> <li class="pure-menu-item "><a href="/MLJTutorials/isl/lab-5/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Lab 5</a> <li class="pure-menu-item "><a href="/MLJTutorials/isl/lab-6b/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Lab 6b</a> <li class="pure-menu-item "><a href="/MLJTutorials/isl/lab-8/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Lab 8</a> <li class="pure-menu-item "><a href="/MLJTutorials/isl/lab-9/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Lab 9</a> <li class="pure-menu-item "><a href="/MLJTutorials/isl/lab-10/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Lab 10</a> </ul> <li class=pure-menu-sublist-title ><strong>End to end examples</strong> <ul class=pure-menu-sublist  id=e2e> <li class="pure-menu-item "><a href="/MLJTutorials/end-to-end/AMES/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> AMES</a> <li class="pure-menu-item "><a href="/MLJTutorials/end-to-end/wine/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Wine</a> <li class="pure-menu-item "><a href="/MLJTutorials/end-to-end/crabs-xgb/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Crabs (XGB)</a> <li class="pure-menu-item "><a href="/MLJTutorials/end-to-end/horse/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Horse</a> </ul> </ul> </div> </div> <div id=main > <div class=franklin-content > <h1 id=data_interpretation_scientific_types ><a href="/MLJTutorials/data/scitype/index.html#data_interpretation_scientific_types">Data interpretation: Scientific Types</a></h1> <em>Download the</em> <a href="https://raw.githubusercontent.com/alan-turing-institute/MLJTutorials/gh-pages/generated/notebooks/D0-scitype.ipynb" target=_blank ><em>notebook</em></a>, <em>the</em> <a href="https://raw.githubusercontent.com/alan-turing-institute/MLJTutorials/gh-pages/generated/scripts/D0-scitype-raw.jl" target=_blank ><em>raw script</em></a>, <em>or the</em> <a href="https://raw.githubusercontent.com/alan-turing-institute/MLJTutorials/gh-pages/generated/scripts/D0-scitype.jl" target=_blank ><em>annotated script</em></a> <em>for this tutorial &#40;right-click on the link and save&#41;.</em> <div class=franklin-toc ><ol><li><a href="/MLJTutorials/data/scitype/index.html#machine_type_vs_scientific_type">Machine type vs Scientific Type</a><ol><li><a href="/MLJTutorials/data/scitype/index.html#why_make_a_distinction">Why make a distinction?</a><li><a href="/MLJTutorials/data/scitype/index.html#the_scientific_types">The Scientific Types</a><li><a href="/MLJTutorials/data/scitype/index.html#inspecting_the_scitype">Inspecting the scitype</a><li><a href="/MLJTutorials/data/scitype/index.html#changing_the_scitype">Changing the scitype</a><li><a href="/MLJTutorials/data/scitype/index.html#string_and_unknown">String and Unknown</a></ol><li><a href="/MLJTutorials/data/scitype/index.html#tips_and_tricks">Tips and tricks</a><ol><li><a href="/MLJTutorials/data/scitype/index.html#type_to_type_coercion">Type to Type coercion</a><li><a href="/MLJTutorials/data/scitype/index.html#autotype">Autotype</a></ol></ol></div><h2 id=machine_type_vs_scientific_type ><a href="/MLJTutorials/data/scitype/index.html#machine_type_vs_scientific_type">Machine type vs Scientific Type</a></h2> <h3 id=why_make_a_distinction ><a href="/MLJTutorials/data/scitype/index.html#why_make_a_distinction">Why make a distinction?</a></h3> <p>When analysing data, it is important to distinguish between</p> <ul> <li><p><em>how the data is encoded</em> &#40;e.g. <code>Int</code>&#41;, and</p> <li><p><em>how the data should be interpreted</em> &#40;e.g. a class label, a count, ...&#41;</p> </ul> <p>How the data is encoded will be referred to as the <strong>machine type</strong> whereas how the data should be interpreted will be referred to as the <strong>scientific type</strong> &#40;or <code>scitype</code>&#41;.</p> <p>In some cases, this may be un-ambiguous, for instance if you have a vector of floating point values, this should usually be interpreted as a continuous feature &#40;e.g.: weights, speeds, temperatures, ...&#41;.</p> <p>In many other cases however, there may be ambiguities, we list a few examples below:</p> <ul> <li><p>A vector of <code>Int</code> e.g. <code>&#91;1, 2, ...&#93;</code> which should be interpreted as categorical labels,</p> <li><p>A vector of <code>Int</code> e.g. <code>&#91;1, 2, ...&#93;</code> which should be interpreted as count data,</p> <li><p>A vector of <code>String</code> e.g. <code>&#91;&quot;High&quot;, &quot;Low&quot;, &quot;High&quot;, ...&#93;</code> which should be interpreted as ordered categorical labels,</p> <li><p>A vector of <code>String</code> e.g. <code>&#91;&quot;John&quot;, &quot;Maria&quot;, ...&#93;</code> which should not interpreted as informative data,</p> <li><p>A vector of floating points <code>&#91;1.5, 1.5, -2.3, -2.3&#93;</code> which should be interpreted as categorical data &#40;e.g. the few possible values of some setting&#41;, etc.</p> </ul> <h3 id=the_scientific_types ><a href="/MLJTutorials/data/scitype/index.html#the_scientific_types">The Scientific Types</a></h3> <p>The package <a href="https://github.com/alan-turing-institute/ScientificTypes.jl">ScientificTypes.jl</a> defines a barebone type hierarchy which can be used to indicate how a particular feature should be interpreted; in particular:</p> <pre><code class="julia hljs">Found
├─ Known
│  ├─ Finite
│  │  ├─ Multiclass
│  │  └─ OrderedFactor
│  └─ Infinite
│     ├─ Continuous
│     └─ Count
└─ Unknown</code></pre> <p>A <em>scientific type convention</em> is a specific implementation indicating how machine types can be related to scientific types. It may also provide helper functions to convert data to a given scitype.</p> <p>The convention used in MLJ is implemented in <a href="https://github.com/alan-turing-institute/ScientificTypes.jl">MLJScientificTypes.jl</a>. This is what we will use throughout; you never need to use ScientificTypes.jl unless you intend to implement your own scientific type convention.</p> <h3 id=inspecting_the_scitype ><a href="/MLJTutorials/data/scitype/index.html#inspecting_the_scitype">Inspecting the scitype</a></h3> <p>The <code>schema</code> function</p> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> RDatasets, MLJScientificTypes
boston = dataset(<span class=hljs-string >"MASS"</span>, <span class=hljs-string >"Boston"</span>)
sch = schema(boston)</code></pre><pre><code class="plaintext hljs">_.table = 
┌─────────┬─────────┬────────────┐
│ _.names │ _.types │ _.scitypes │
├─────────┼─────────┼────────────┤
│ Crim    │ Float64 │ Continuous │
│ Zn      │ Float64 │ Continuous │
│ Indus   │ Float64 │ Continuous │
│ Chas    │ Int64   │ Count      │
│ NOx     │ Float64 │ Continuous │
│ Rm      │ Float64 │ Continuous │
│ Age     │ Float64 │ Continuous │
│ Dis     │ Float64 │ Continuous │
│ Rad     │ Int64   │ Count      │
│ Tax     │ Int64   │ Count      │
│ PTRatio │ Float64 │ Continuous │
│ Black   │ Float64 │ Continuous │
│ LStat   │ Float64 │ Continuous │
│ MedV    │ Float64 │ Continuous │
└─────────┴─────────┴────────────┘
_.nrows = 506
</code></pre> <p>In this cases, most of the variables have a &#40;machine&#41; type <code>Float64</code> and their default interpretation is <code>Continuous</code>. There is also <code>:Chas</code>, <code>:Rad</code> and <code>:Tax</code> that have a &#40;machine&#41; type <code>Int64</code> and their default interpretation is <code>Count</code>.</p> <p>While the interpretation as <code>Continuous</code> is usually fine, the interpretation as <code>Count</code> needs a bit more attention. For instance note that:</p> <pre><code class="julia hljs">unique(boston.Chas)</code></pre><pre><code class="plaintext hljs">2-element Array{Int64,1}:
 0
 1</code></pre> <p>so even though it&#39;s got a machine type of <code>Int64</code> and consequently a default interpretation of <code>Count</code>, it would be more appropriate to interpret it as an <code>OrderedFactor</code>.</p> <h3 id=changing_the_scitype ><a href="/MLJTutorials/data/scitype/index.html#changing_the_scitype">Changing the scitype</a></h3> <p>In order to re-specify the scitype&#40;s&#41; of feature&#40;s&#41; in a dataset, you can use the <code>coerce</code> function and specify pairs of variable name and scientific type:</p> <pre><code class="julia hljs">boston2 = coerce(boston, :Chas =&gt; OrderedFactor);</code></pre>
<p>the effect of this is to convert the <code>:Chas</code> column to an ordered categorical vector:</p>
<pre><code class="julia hljs">eltype(boston2.Chas)</code></pre><pre><code class="plaintext hljs">CategoricalArrays.CategoricalValue{Int64,UInt32}</code></pre>
<p>corresponding to the <code>OrderedFactor</code> scitype:</p>
<pre><code class="julia hljs">elscitype(boston2.Chas)</code></pre><pre><code class="plaintext hljs">OrderedFactor{2}</code></pre>
<p>You can also specify multiple pairs in one shot with <code>coerce</code>:</p>
<pre><code class="julia hljs">boston3 = coerce(boston, :Chas =&gt; OrderedFactor, :Rad =&gt; OrderedFactor);</code></pre>
<h3 id=string_and_unknown ><a href="/MLJTutorials/data/scitype/index.html#string_and_unknown">String and Unknown</a></h3>
<p>If a feature in  your dataset has String elements, then the  default scitype is <code>Unknown</code>; you can either choose to  drop  such columns or to coerce them to categorical:</p>
<pre><code class="julia hljs">feature = [<span class=hljs-string >"AA"</span>, <span class=hljs-string >"BB"</span>, <span class=hljs-string >"AA"</span>, <span class=hljs-string >"AA"</span>, <span class=hljs-string >"BB"</span>]
elscitype(feature)</code></pre><pre><code class="plaintext hljs">Textual</code></pre>
<p>which you can coerce:</p>
<pre><code class="julia hljs">feature2 = coerce(feature, Multiclass)
elscitype(feature2)</code></pre><pre><code class="plaintext hljs">Multiclass{2}</code></pre>
<h2 id=tips_and_tricks ><a href="/MLJTutorials/data/scitype/index.html#tips_and_tricks">Tips and tricks</a></h2>
<h3 id=type_to_type_coercion ><a href="/MLJTutorials/data/scitype/index.html#type_to_type_coercion">Type to Type coercion</a></h3>
<p>In  some cases you will want to reinterpret all features currently interpreted as some scitype <code>S1</code> into some other scitype <code>S2</code>. An example  is if some features are currently interpreted as <code>Count</code> because their original type was <code>Int</code> but you  want  to  consider all such as <code>Continuous</code>:</p>
<pre><code class="julia hljs">data = select(boston, [:Rad, :Tax])
schema(data)</code></pre><pre><code class="plaintext hljs">_.table = 
┌─────────┬─────────┬────────────┐
│ _.names │ _.types │ _.scitypes │
├─────────┼─────────┼────────────┤
│ Rad     │ Int64   │ Count      │
│ Tax     │ Int64   │ Count      │
└─────────┴─────────┴────────────┘
_.nrows = 506
</code></pre>
<p>let&#39;s coerce from <code>Count</code> to <code>Continuous</code>:</p>
<pre><code class="julia hljs">data2 = coerce(data, Count =&gt; Continuous)
schema(data2)</code></pre><pre><code class="plaintext hljs">_.table = 
┌─────────┬─────────┬────────────┐
│ _.names │ _.types │ _.scitypes │
├─────────┼─────────┼────────────┤
│ Rad     │ Float64 │ Continuous │
│ Tax     │ Float64 │ Continuous │
└─────────┴─────────┴────────────┘
_.nrows = 506
</code></pre>
<h3 id=autotype ><a href="/MLJTutorials/data/scitype/index.html#autotype">Autotype</a></h3>
<p>A last useful tool is <code>autotype</code> which allows you to specify <em>rules</em> to define the interpretation of features automatically. You can code your own rules but there are three useful ones that are pre-coded:</p>
<ul>
<li><p>the <code>:few_to_finite</code> rule which checks how many unique entries are present in a vector and if there are &quot;few&quot; suggests a categorical type,</p>

<li><p>the <code>:discrete_to_continuous</code> rule converts <code>Integer</code> or <code>Count</code> to <code>Continuous</code></p>

<li><p>the <code>:string_to_multiclass</code> which returns <code>Multiclass</code> for any string-like column.</p>

</ul>
<p>For instance:</p>
<pre><code class="julia hljs">boston3 = coerce(boston, autotype(boston, :few_to_finite))
schema(boston3)</code></pre><pre><code class="plaintext hljs">_.table = 
┌─────────┬────────────────────────────────────────────────────┬───────────────────┐
│ _.names │ _.types                                            │ _.scitypes        │
├─────────┼────────────────────────────────────────────────────┼───────────────────┤
│ Crim    │ Float64                                            │ Continuous        │
│ Zn      │ CategoricalArrays.CategoricalValue{Float64,UInt32} │ OrderedFactor{26} │
│ Indus   │ Float64                                            │ Continuous        │
│ Chas    │ CategoricalArrays.CategoricalValue{Int64,UInt32}   │ OrderedFactor{2}  │
│ NOx     │ Float64                                            │ Continuous        │
│ Rm      │ Float64                                            │ Continuous        │
│ Age     │ Float64                                            │ Continuous        │
│ Dis     │ Float64                                            │ Continuous        │
│ Rad     │ CategoricalArrays.CategoricalValue{Int64,UInt32}   │ OrderedFactor{9}  │
│ Tax     │ Int64                                              │ Count             │
│ PTRatio │ CategoricalArrays.CategoricalValue{Float64,UInt32} │ OrderedFactor{46} │
│ Black   │ Float64                                            │ Continuous        │
│ LStat   │ Float64                                            │ Continuous        │
│ MedV    │ Float64                                            │ Continuous        │
└─────────┴────────────────────────────────────────────────────┴───────────────────┘
_.nrows = 506
</code></pre>
<p>You can also specify multiple rules, see <a href="https://alan-turing-institute.github.io/ScientificTypes.jl/stable/#Automatic-type-conversion-for-tabular-data-1">the docs</a> for more information.
<div class=page-foot >
  <div class=copyright >
    &copy; Anthony Blaom, Thibaut Lienart and collaborators. Last modified: February 19, 2020. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a>.
  </div>
</div>

</div>

      </div> 
  </div> 
  <script src="/MLJTutorials/libs/pure/ui.min.js"></script>