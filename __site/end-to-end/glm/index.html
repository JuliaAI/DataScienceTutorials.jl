<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
   <!-- Syntax highlighting via Prism, note: restricted langs -->
<link rel="stylesheet" href="/libs/highlight/github.min.css">
 
  <link rel="stylesheet" href="/css/landing.css">
  <link rel="stylesheet" href="/css/franklin.css">
  <link rel="stylesheet" href="/css/pure.css">
  <link rel="stylesheet" href="/css/side-menu.css">
  <link rel="stylesheet" href="/css/nav.css">
  <link rel="stylesheet" href="/css/extra.css">
  <!-- <link rel="icon" href="/assets/infra/favicon.gif"> -->
   <title>Using GLM.jl</title> 
  <!-- LUNR -->
  <script src="/libs/lunr/lunr.min.js"></script>
  <script src="/libs/lunr/lunr_index.js"></script>
  <script src="/libs/lunr/lunrclient.min.js"></script>
</head>

<body>
  <div id="layout">
    <!-- Menu toggle / hamburger icon -->
    <a href="#menu" id="menuLink" class="menu-link"><span></span></a>
    <div id="menu" style="display: none;">
      <div class="pure-menu">
        <a href="/" id="menu-logo-link">
          <div class="menu-logo">
            <!-- <img id="menu-logo" alt="MLJ Logo" src="/assets/infra/MLJLogo2.svg" /> -->
            <p><strong>Data Science Tutorials</strong></p>
          </div>
        </a>
        <form id="lunrSearchForm" name="lunrSearchForm">
          <input class="search-input" name="q" placeholder="Search in tutorials..." type="text">
          <input type="submit" value="Search" formaction="/search/index.html" style="display:none">
        </form>
        <!-- LIST OF MENU ITEMS -->
        <ul class="pure-menu-list">
          <li class="pure-menu-item pure-menu-top-item "><a
   	      href="https://github.com/JuliaAI/DataScienceTutorials.jl"
              class="pure-menu-link"><strong>Contribute</strong></a></li>

          <!-- DATA BASICS -->
          <div class="dropdown">
            <li class="pure-menu-sublist-title"><strong>Data Basics</strong></li>
          </div>
          <div class="collapse dropdown-content">
            <ul class="pure-menu-sublist">
              <li class="pure-menu-item "><a
                  href="/data/loading/" class="pure-menu-link"><span style="padding-right:0.5rem;">•</span> Loading
                  data</a></li>
              <li class="pure-menu-item "><a
                  href="/data/dataframe/" class="pure-menu-link"><span style="padding-right:0.5rem;">•</span> Data
                  Frames</a></li>
              <li class="pure-menu-item "><a
                  href="/data/categorical/" class="pure-menu-link"><span style="padding-right:0.5rem;">•</span>
                  Categorical Arrays</a></li>
              <li class="pure-menu-item "><a
                  href="/data/scitype/" class="pure-menu-link"><span style="padding-right:0.5rem;">•</span> Scientific
                  Type</a></li>
              <li class="pure-menu-item "><a
                  href="/data/processing/" class="pure-menu-link"><span style="padding-right:0.5rem;">•</span> Data
                  processing</a></li>
            </ul>
          </div>

          <!-- GETTING STARTED WITH MLJ -->
          <div class="dropdown">
            <li class="pure-menu-sublist-title"><strong>Getting Started</strong></li>
          </div>
          <div class="collapse dropdown-content">
            <ul class="pure-menu-sublist">
              <li
                class="pure-menu-item ">
                <a href="/getting-started/choosing-a-model/" class="pure-menu-link"><span
                    style="padding-right:0.5rem;">•</span> Choosing a model</a>
              </li>
              <li class="pure-menu-item ">
                <a href="/getting-started/fit-and-predict/" class="pure-menu-link"><span
                    style="padding-right:0.5rem;">•</span> Fit, predict, transform</a>
              </li>
              <li class="pure-menu-item "><a
                  href="/getting-started/model-tuning/" class="pure-menu-link"><span
                    style="padding-right:0.5rem;">•</span> Model tuning</a></li>
              <li class="pure-menu-item "><a
                  href="/getting-started/ensembles/" class="pure-menu-link"><span style="padding-right:0.5rem;">•</span>
                  Ensembles</a></li>
              <li class="pure-menu-item "><a
                  href="/getting-started/ensembles-2/" class="pure-menu-link"><span
                    style="padding-right:0.5rem;">•</span> Ensembles 2</a></li>
              <li
                class="pure-menu-item ">
                <a href="/getting-started/composing-models/" class="pure-menu-link"><span
                    style="padding-right:0.5rem;">•</span> Composing models</a>
              </li>
              <li class="pure-menu-item "><a
                  href="/getting-started/stacking/" class="pure-menu-link"><span style="padding-right:0.5rem;">•</span>
                  Stacking</a></li>
            </ul>
          </div>
          <!-- INTRO TO STATS LEARNING -->
          <div class="dropdown">
            <li class="pure-menu-sublist-title"><strong>Intro to Stats Learning</strong></li>
          </div>
          <div class="collapse dropdown-content">
            <ul class="pure-menu-sublist" id=isl>
              <li class="pure-menu-item "><a href="/isl/lab-2/"
                  class="pure-menu-link"><span style="padding-right:0.5rem;">•</span> Lab 2</a></li>
              <li class="pure-menu-item "><a href="/isl/lab-3/" class="pure-menu-link"><span
                    style="padding-right:0.5rem;">•</span> Lab 3</a></li>
              <li class="pure-menu-item "><a href="/isl/lab-4/" class="pure-menu-link"><span
                    style="padding-right:0.5rem;">•</span> Lab 4</a></li>
              <li class="pure-menu-item "><a href="/isl/lab-5/" class="pure-menu-link"><span
                    style="padding-right:0.5rem;">•</span> Lab 5</a></li>
              <li class="pure-menu-item "><a href="/isl/lab-6b/" class="pure-menu-link"><span
                    style="padding-right:0.5rem;">•</span> Lab 6b</a></li>
              <li class="pure-menu-item "><a href="/isl/lab-8/" class="pure-menu-link"><span
                    style="padding-right:0.5rem;">•</span> Lab 8</a></li>
              <li class="pure-menu-item "><a href="/isl/lab-9/" class="pure-menu-link"><span
                    style="padding-right:0.5rem;">•</span> Lab 9</a></li>
              <li class="pure-menu-item "><a href="/isl/lab-10/" class="pure-menu-link"><span
                    style="padding-right:0.5rem;">•</span> Lab 10</a></li>
            </ul>
          </div>
          <!-- End to End -->
          <div class="dropdown">
            <li class="pure-menu-sublist-title"><strong>End to End</strong></li>
          </div>
          <div class="dropdown-content collapse">
            <ul class="pure-menu-sublist" >
              <li class="pure-menu-item "><a
                  href="/end-to-end/telco/" class="pure-menu-link"><span style="padding-right:0.5rem;">•</span>Telco
                  Churn</a></li>
              <li class="pure-menu-item "><a
                  href="/end-to-end/AMES/" class="pure-menu-link"><span style="padding-right:0.5rem;">•</span> AMES</a>
              </li>
              <li class="pure-menu-item "><a href="/end-to-end/wine/" class="pure-menu-link"><span
                    style="padding-right:0.5rem;">•</span> Wine</a></li>
              <li class="pure-menu-item "><a
                  href="/end-to-end/crabs-xgb/" class="pure-menu-link"><span style="padding-right:0.5rem;">•</span>
                  Crabs (XGB)</a></li>
              <li class="pure-menu-item "><a href="/end-to-end/horse/" class="pure-menu-link"><span
                    style="padding-right:0.5rem;">•</span> Horse</a></li>
              <li class="pure-menu-item "><a href="/end-to-end/HouseKingCounty/" class="pure-menu-link"><span
                    style="padding-right:0.5rem;">•</span> King County Houses</a></li>
              <li class="pure-menu-item "><a href="/end-to-end/airfoil" class="pure-menu-link"><span
                    style="padding-right:0.5rem;">•</span> Airfoil </a></li>
              <li class="pure-menu-item "><a href="/end-to-end/boston-lgbm" class="pure-menu-link"><span
                    style="padding-right:0.5rem;">•</span> Boston (lgbm) </a></li>
              <li class="pure-menu-item "><a href="/end-to-end/glm/" class="pure-menu-link"><span
                    style="padding-right:0.5rem;">•</span> Using GLM.jl </a></li>
              <li class="pure-menu-item "><a href="/end-to-end/powergen/" class="pure-menu-link"><span
                    style="padding-right:0.5rem;">•</span> Power Generation </a></li>
              <li class="pure-menu-item "><a href="/end-to-end/boston-flux" class="pure-menu-link"><span
                    style="padding-right:0.5rem;">•</span> Boston (Flux) </a></li>
              <li class="pure-menu-item "><a href="/end-to-end/breastcancer" class="pure-menu-link"><span
                    style="padding-right:0.5rem;">•</span> Breast Cancer</a></li>
              <li class="pure-menu-item "><a href="/end-to-end/creditfraud" class="pure-menu-link"><span
                    style="padding-right:0.5rem;">•</span> Credit Fraud</a></li>
            </ul>
          </div>
          <!-- ADVANCED EXAMPLES -->
          <div class="dropdown">
            <li class="pure-menu-sublist-title"><strong>Advanced Examples</strong></li>
          </div>
          <div class="dropdown-content collapse">
            <ul class="pure-menu-sublist" id=adv>
              <li class="pure-menu-item "><a href="/advanced/ensembles-3/" class="pure-menu-link"><span
                    style="padding-right:0.5rem;">•</span> Ensembles (3)</a></li>
            </ul>
          </div>
      </div>
      </ul>
      <!-- END OF LIST OF MENU ITEMS -->
    </div>
  </div>
  <div id="nav" class="navigation">
    <div class="nav-container">
      <div class="brand">
        <a href="/">DataScienceTutorials.jl</a>
      </div>
      <nav>
        <div class="nav-mobile"><a id="nav-toggle" href="#!"><span></span></a></div>
        <ul class="nav-list">
        <!-- horizontal navigation bar gets injected -->
        </ul>
      </nav>
    </div>
  </div>
  <div id="main"> <!-- Closed in foot -->
    

    <!-- Content appended here -->
<div class="franklin-content"><h1 id="using_glmjl"><a href="#using_glmjl" class="header-anchor">Using GLM.jl</a></h1>
<em>To ensure code in this tutorial runs as shown, download the tutorial <a href="https://raw.githubusercontent.com/juliaai/DataScienceTutorials.jl/gh-pages/__generated/end-to-end/GLM.tar.gz">project folder</a> and follow <a href="/#learning_by_doing">these instructions</a>.</em></p>
<p><em>If you have questions or suggestions about this tutorial, please open an issue <a href="https://github.com/JuliaAI/DataScienceTutorials.jl/issues/new">here</a>.</em></p>
<p><div class="franklin-toc"><ol><li><a href="#reading_the_data">Reading the data</a></li><li><a href="#defining_the_linear_model">Defining the Linear Model</a></li><li><a href="#reading_the_output_of_fitting_the_linear_model">Reading the Output of Fitting the Linear Model</a></li><li><a href="#defining_the_logistic_model">Defining the Logistic Model</a></li><li><a href="#reading_the_output_from_the_prediction_of_the_logistic_model">Reading the Output from the Prediction of the Logistic Model</a></li></ol></div>
<p><strong>Main author</strong>: <a href="https://github.com/drcxcruz">Clarman Cruz</a>.</p>
<p>This juypter lab showcases MLJ in particular using the popular <a href="https://github.com/JuliaStats/GLM.jl">GLM</a> Julia package. We are using two datasets.  One dataset was created manually for testing purposes.  The other data set is the CollegeDistance dataset from the <a href="https://cran.r-project.org/web/packages/AER/index.html">AER</a> package in R.</p>
<p>We can quickly define our models in MLJ and study their results.  It is very easy and consistent.</p>
<pre><code class="language-julia">using MLJ, CategoricalArrays, PrettyPrinting
import DataFrames: DataFrame, nrow
using UrlDownload

LinearRegressor &#61; @load LinearRegressor pkg&#61;GLM
LinearBinaryClassifier &#61; @load LinearBinaryClassifier pkg&#61;GLM</code></pre><pre><code class="plaintext code-output">import MLJGLMInterface ✔
import MLJGLMInterface ✔
MLJGLMInterface.LinearBinaryClassifier</code></pre>
<div class="dropdown"><h2 id="reading_the_data"><a href="#reading_the_data" class="header-anchor">Reading the data</a></h2></div>
<div class="dropdown-content"><p>The CollegeDistance dataset was stored in a CSV file.  Here, we read the input file.</p>
<pre><code class="language-julia">baseurl &#61; &quot;https://raw.githubusercontent.com/tlienart/DataScienceTutorialsData.jl/master/data/glm/&quot;

dfX &#61; DataFrame&#40;urldownload&#40;baseurl * &quot;X3.csv&quot;&#41;&#41;
dfYbinary &#61; DataFrame&#40;urldownload&#40;baseurl * &quot;Y3.csv&quot;&#41;&#41;
dfX1 &#61; DataFrame&#40;urldownload&#40;baseurl * &quot;X1.csv&quot;&#41;&#41;
dfY1 &#61; DataFrame&#40;urldownload&#40;baseurl * &quot;Y1.csv&quot;&#41;&#41;;</code></pre>
<p>You can have a look at those using <code>first</code>:</p>
<pre><code class="language-julia">first&#40;dfX, 3&#41;</code></pre><pre><code class="plaintext code-output">3×12 DataFrame
 Row │ gender   ethnicity  score    fcollege  mcollege  home     urban    unemp    wage     tuition  income   region
     │ String7  String15   Float64  String3   String3   String3  String3  Float64  Float64  Float64  String7  String7
─────┼────────────────────────────────────────────────────────────────────────────────────────────────────────────────
   1 │ male     other        39.15  yes       no        yes      yes          6.2     8.09  0.88915  high     other
   2 │ female   other        48.87  no        no        yes      yes          6.2     8.09  0.88915  low      other
   3 │ male     other        48.74  no        no        yes      yes          6.2     8.09  0.88915  low      other</code></pre>
<p>same for Y:</p>
<pre><code class="language-julia">first&#40;dfY1, 3&#41;</code></pre><pre><code class="plaintext code-output">3×1 DataFrame
 Row │ Y
     │ Float64
─────┼───────────
   1 │ -2.04463
   2 │ -0.461529
   3 │  0.458262</code></pre>
<p>‎</p></div>
<div class="dropdown"><h2 id="defining_the_linear_model"><a href="#defining_the_linear_model" class="header-anchor">Defining the Linear Model</a></h2></div>
<div class="dropdown-content"><p>Let see how many MLJ models handle our kind of target which is the y variable.</p>
<pre><code class="language-julia">ms &#61; models&#40;&#41; do m
    AbstractVector&#123;Count&#125; &lt;: m.target_scitype
end
foreach&#40;m -&gt; println&#40;m.name&#41;, ms&#41;</code></pre><pre><code class="plaintext code-output">EvoTreeCount
LinearCountRegressor
NeuralNetworkClassifier
NeuralNetworkRegressor
XGBoostCount
</code></pre>
<p>How about if the type was Continuous:</p>
<pre><code class="language-julia">ms &#61; models&#40;&#41; do m
    Vector&#123;Continuous&#125; &lt;: m.target_scitype
end
foreach&#40;m -&gt; println&#40;m.name&#41;, ms&#41;</code></pre><pre><code class="plaintext code-output">ARDRegressor
AdaBoostRegressor
BaggingRegressor
BayesianRidgeRegressor
CatBoostRegressor
ConstantRegressor
DecisionTreeRegressor
DecisionTreeRegressor
DeterministicConstantRegressor
DummyRegressor
ElasticNetCVRegressor
ElasticNetRegressor
ElasticNetRegressor
EpsilonSVR
EvoLinearRegressor
EvoSplineRegressor
EvoTreeGaussian
EvoTreeMLE
EvoTreeRegressor
ExtraTreesRegressor
GaussianMixtureRegressor
GaussianProcessRegressor
GradientBoostingRegressor
HistGradientBoostingRegressor
HuberRegressor
HuberRegressor
KNNRegressor
KNeighborsRegressor
KPLSRegressor
LADRegressor
LGBMRegressor
LarsCVRegressor
LarsRegressor
LassoCVRegressor
LassoLarsCVRegressor
LassoLarsICRegressor
LassoLarsRegressor
LassoRegressor
LassoRegressor
LinearRegressor
LinearRegressor
LinearRegressor
LinearRegressor
NeuralNetworkRegressor
NeuralNetworkRegressor
NuSVR
OrthogonalMatchingPursuitCVRegressor
OrthogonalMatchingPursuitRegressor
PLSRegressor
PassiveAggressiveRegressor
QuantileRegressor
RANSACRegressor
RandomForestRegressor
RandomForestRegressor
RandomForestRegressor
RidgeCVRegressor
RidgeRegressor
RidgeRegressor
RidgeRegressor
RobustRegressor
SGDRegressor
SRRegressor
SVMLinearRegressor
SVMNuRegressor
SVMRegressor
StableForestRegressor
StableRulesRegressor
TheilSenRegressor
XGBoostRegressor
</code></pre>
<p>We can quickly define our models in MLJ.  It is very easy and consistent.</p>
<pre><code class="language-julia">X &#61; copy&#40;dfX1&#41;
y &#61; copy&#40;dfY1&#41;

coerce&#33;&#40;X, autotype&#40;X, :string_to_multiclass&#41;&#41;
yv &#61; Vector&#40;y&#91;:, 1&#93;&#41;

LinearRegressorPipe &#61; Pipeline&#40;
    Standardizer&#40;&#41;,
    OneHotEncoder&#40;drop_last &#61; true&#41;,
    LinearRegressor&#40;&#41;
&#41;

LinearModel &#61; machine&#40;LinearRegressorPipe, X, yv&#41;
fit&#33;&#40;LinearModel&#41;
fp &#61; fitted_params&#40;LinearModel&#41;</code></pre><pre><code class="plaintext code-output">(linear_regressor = (features = [:V1, :V2, :V3, :V4, :V5],
                     coef = [1.020786949740552, 1.03242891546997, 0.009406292423317619, 0.02663391517120747, 0.2998591563637024],
                     intercept = 0.015893883995789778,),
 one_hot_encoder = (all_features = [:V1, :V2, :V3, :V4, :V5],
                    fitted_levels_given_feature = Dict{Symbol, CategoricalArrays.CategoricalArray}(),
                    ref_name_pairs_given_feature = Dict{Symbol, Vector{Union{Pair{Missing, Symbol}, Pair{<:Unsigned, Symbol}}}}(),),
 standardizer = (features_fit = [:V1, :V2, :V5, :V3, :V4],
                 means = (0.0024456300706479973, -0.015561621122145304, 0.0077036209704558975, 0.02442889884313839, 0.15168404285157286),
                 stds = (1.1309193246154066, 1.1238897897565245, 1.1421493464876622, 2.332713568319154, 6.806065861835239),),)</code></pre>
<p>‎</p></div>
<div class="dropdown"><h2 id="reading_the_output_of_fitting_the_linear_model"><a href="#reading_the_output_of_fitting_the_linear_model" class="header-anchor">Reading the Output of Fitting the Linear Model</a></h2></div>
<div class="dropdown-content"><p>We can quickly read the results of our models in MLJ.  Remember to compute the accuracy of the linear model.</p>
<pre><code class="language-julia">ŷ &#61; MLJ.predict&#40;LinearModel, X&#41;
yhatResponse &#61; &#91;ŷ&#91;i,1&#93;.μ for i in 1:nrow&#40;y&#41;&#93;
residuals &#61; y .- yhatResponse
r &#61; report&#40;LinearModel&#41;
println&#40;&quot;\n Coefficients:  &quot;, fp.linear_regressor.coef&#41;
println&#40;&quot;\n y \n &quot;, y&#91;1:5,1&#93;&#41;
println&#40;&quot;\n ŷ \n &quot;, ŷ&#91;1:5&#93;&#41;
println&#40;&quot;\n yhatResponse \n &quot;, yhatResponse&#91;1:5&#93;&#41;
println&#40;&quot;\n Residuals \n &quot;, y&#91;1:5,1&#93; .- yhatResponse&#91;1:5&#93;&#41;
println&#40;&quot;\n Standard Error per Coefficient \n&quot;, r.linear_regressor.stderror&#91;2:end&#93;&#41;</code></pre><pre><code class="plaintext code-output">
 Coefficients:  [1.020786949740552, 1.03242891546997, 0.009406292423317619, 0.02663391517120747, 0.2998591563637024]

 y 
 [-2.0446341129015, -0.461528671336098, 0.458261960749596, 2.2746223981481, -0.969887403007307]

 ŷ 
 Distributions.Normal{Float64}[Distributions.Normal{Float64}(μ=-1.6915415373374758, σ=0.9580569656804974), Distributions.Normal{Float64}(μ=1.4120055632036441, σ=0.9580569656804974), Distributions.Normal{Float64}(μ=0.4736296806862398, σ=0.9580569656804974), Distributions.Normal{Float64}(μ=0.7266938985590489, σ=0.9580569656804974), Distributions.Normal{Float64}(μ=-1.8396459459760568, σ=0.9580569656804974)]

 yhatResponse 
 [-1.6915415373374758, 1.4120055632036441, 0.4736296806862398, 0.7266938985590489, -1.8396459459760568]

 Residuals 
 [-0.3530925755640242, -1.873534234539742, -0.015367719936643764, 1.5479284995890512, 0.8697585429687498]

 Standard Error per Coefficient 
[0.01587640310780568, 0.015862782503144917, 0.01515900587321476, 0.01515667698600387, 0.016546721612329368]
</code></pre>
<p>and get the accuracy</p>
<pre><code class="language-julia">round&#40;rms&#40;yhatResponse, y&#91;:,1&#93;&#41;, sigdigits&#61;4&#41;</code></pre><pre><code class="plaintext code-output">0.9573</code></pre>
<p>‎</p></div>
<div class="dropdown"><h2 id="defining_the_logistic_model"><a href="#defining_the_logistic_model" class="header-anchor">Defining the Logistic Model</a></h2></div>
<div class="dropdown-content"><pre><code class="language-julia">X &#61; copy&#40;dfX&#41;
y &#61; copy&#40;dfYbinary&#41;

coerce&#33;&#40;X, autotype&#40;X, :string_to_multiclass&#41;&#41;
yc &#61; CategoricalArray&#40;y&#91;:, 1&#93;&#41;
yc &#61; coerce&#40;yc, OrderedFactor&#41;

LinearBinaryClassifierPipe &#61; Pipeline&#40;
    Standardizer&#40;&#41;,
    OneHotEncoder&#40;drop_last &#61; true&#41;,
    LinearBinaryClassifier&#40;&#41;
&#41;

LogisticModel &#61; machine&#40;LinearBinaryClassifierPipe, X, yc&#41;
fit&#33;&#40;LogisticModel&#41;
fp &#61; fitted_params&#40;LogisticModel&#41;</code></pre><pre><code class="plaintext code-output">(linear_binary_classifier = (features = [:gender__female, :ethnicity__afam, :ethnicity__hispanic, :score, :fcollege__no, :mcollege__no, :home__no, :urban__no, :unemp, :wage, :tuition, :income__high, :region__other],
                             coef = [0.20250729378868748, 0.13075293910912908, 0.344951624939835, 0.9977565847160846, -0.5022315102984592, -0.4785005626021651, -0.20440507809955, -0.06922751403500071, 0.05892864973017096, -0.08344749828203225, -0.0023151433338598607, 0.46177653955786574, 0.3843262958100779],
                             intercept = -1.076633890579366,),
 one_hot_encoder = (all_features = [:gender, :ethnicity, :score, :fcollege, :mcollege, :home, :urban, :unemp, :wage, :tuition, :income, :region],
                    fitted_levels_given_feature = Dict{Symbol, CategoricalArrays.CategoricalArray}(:income => CategoricalArrays.CategoricalValue{InlineStrings.String7, UInt32}[InlineStrings.String7("high"), InlineStrings.String7("low")], :ethnicity => CategoricalArrays.CategoricalValue{InlineStrings.String15, UInt32}[InlineStrings.String15("afam"), InlineStrings.String15("hispanic"), InlineStrings.String15("other")], :fcollege => CategoricalArrays.CategoricalValue{InlineStrings.String3, UInt32}[InlineStrings.String3("no"), InlineStrings.String3("yes")], :home => CategoricalArrays.CategoricalValue{InlineStrings.String3, UInt32}[InlineStrings.String3("no"), InlineStrings.String3("yes")], :urban => CategoricalArrays.CategoricalValue{InlineStrings.String3, UInt32}[InlineStrings.String3("no"), InlineStrings.String3("yes")], :region => CategoricalArrays.CategoricalValue{InlineStrings.String7, UInt32}[InlineStrings.String7("other"), InlineStrings.String7("west")], :mcollege => CategoricalArrays.CategoricalValue{InlineStrings.String3, UInt32}[InlineStrings.String3("no"), InlineStrings.String3("yes")], :gender => CategoricalArrays.CategoricalValue{InlineStrings.String7, UInt32}[InlineStrings.String7("female"), InlineStrings.String7("male")]),
                    ref_name_pairs_given_feature = Dict{Symbol, Vector{Union{Pair{Missing, Symbol}, Pair{<:Unsigned, Symbol}}}}(:income => [0x00000001 => :income__high], :ethnicity => [0x00000001 => :ethnicity__afam, 0x00000002 => :ethnicity__hispanic], :fcollege => [0x00000001 => :fcollege__no], :home => [0x00000001 => :home__no], :urban => [0x00000001 => :urban__no], :region => [0x00000001 => :region__other], :mcollege => [0x00000001 => :mcollege__no], :gender => [0x00000001 => :gender__female]),),
 standardizer = (features_fit = [:wage, :unemp, :tuition, :score],
                 means = (9.500506478338009, 7.597214581091511, 0.8146082493518824, 50.88902933684601),
                 stds = (1.3430670761078416, 2.763580873344848, 0.33950381985971717, 8.701909614072397),),)</code></pre>
<p>‎</p></div>
<div class="dropdown"><h2 id="reading_the_output_from_the_prediction_of_the_logistic_model"><a href="#reading_the_output_from_the_prediction_of_the_logistic_model" class="header-anchor">Reading the Output from the Prediction of the Logistic Model</a></h2></div>
<div class="dropdown-content"><p>The output of the MLJ model basically contain the same information as the R version of the model.</p>
<pre><code class="language-julia">ŷ &#61; MLJ.predict&#40;LogisticModel, X&#41;
residuals &#61; &#91;1 - pdf&#40;ŷ&#91;i&#93;, y&#91;i,1&#93;&#41; for i in 1:nrow&#40;y&#41;&#93;
r &#61; report&#40;LogisticModel&#41;

println&#40;&quot;\n Coefficients:  &quot;, fp.linear_binary_classifier.coef&#41;
println&#40;&quot;\n y \n &quot;, y&#91;1:5,1&#93;&#41;
println&#40;&quot;\n ŷ \n &quot;, ŷ&#91;1:5&#93;&#41;
println&#40;&quot;\n residuals \n &quot;, residuals&#91;1:5&#93;&#41;
println&#40;&quot;\n Standard Error per Coefficient \n&quot;, r.linear_binary_classifier.stderror&#91;2:end&#93;&#41;</code></pre><pre><code class="plaintext code-output">
 Coefficients:  [0.20250729378868748, 0.13075293910912908, 0.344951624939835, 0.9977565847160846, -0.5022315102984592, -0.4785005626021651, -0.20440507809955, -0.06922751403500071, 0.05892864973017096, -0.08344749828203225, -0.0023151433338598607, 0.46177653955786574, 0.3843262958100779]

 y 
 [0, 0, 0, 0, 0]

 ŷ 
 CategoricalDistributions.UnivariateFinite{ScientificTypesBase.OrderedFactor{2}, Int64, UInt32, Float64}[UnivariateFinite{ScientificTypesBase.OrderedFactor{2}}(0=>0.881, 1=>0.119), UnivariateFinite{ScientificTypesBase.OrderedFactor{2}}(0=>0.838, 1=>0.162), UnivariateFinite{ScientificTypesBase.OrderedFactor{2}}(0=>0.866, 1=>0.134), UnivariateFinite{ScientificTypesBase.OrderedFactor{2}}(0=>0.936, 1=>0.0637), UnivariateFinite{ScientificTypesBase.OrderedFactor{2}}(0=>0.944, 1=>0.056)]

 residuals 
 [0.11944603346742211, 0.16182691493524637, 0.13445730373831222, 0.06370799769022906, 0.05604680411361729]

 Standard Error per Coefficient 
[0.07542967234030676, 0.1226000420274196, 0.10934317995152516, 0.04661437250372939, 0.09609243724815357, 0.10743620672240191, 0.10642223545563922, 0.09190778860389334, 0.03922724536508867, 0.04118915117919154, 0.05115399636339277, 0.08454431256127866, 0.1228145565794004]
</code></pre>
<p>No logistic analysis is complete without the confusion matrix:</p>
<pre><code class="language-julia">yMode &#61; &#91;mode&#40;ŷ&#91;i&#93;&#41; for i in 1:length&#40;ŷ&#41;&#93;
y &#61; coerce&#40;y&#91;:,1&#93;, OrderedFactor&#41;
yMode &#61; coerce&#40;yMode, OrderedFactor&#41;
confusion_matrix&#40;yMode, y&#41;</code></pre><pre><code class="plaintext code-output">          ┌─────────────┐
          │Ground Truth │
┌─────────┼──────┬──────┤
│Predicted│  0   │  1   │
├─────────┼──────┼──────┤
│    0    │ 3283 │ 831  │
├─────────┼──────┼──────┤
│    1    │ 236  │ 389  │
└─────────┴──────┴──────┘
</code></pre>
<p>‎</p></div>

<div class="bottom-nav-container">
  <a id="prev-tutorial" style="text-decoration: none"><Button class="bottom-nav">
        <div>← Previous Tutorial</div>
        <div id="prev-label" class="button-label"> Home</div>
    </Button></a>
  <a id="next-tutorial" style="text-decoration: none"><Button class="bottom-nav">
        <div>Next Tutorial →</div>
        <div id="next-label" class="button-label">Home</div> 
    </Button></a>
</div>
<div class="page-foot">
  <div class="copyright">
    &copy; Thibaut Lienart, Anthony Blaom, Sebastian Vollmer and collaborators. Last modified: June 17, 2024. Website built with <a
      href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a>.
  </div>
</div></div><!-- CONTENT ENDS HERE -->
</div> <!-- end of id=main -->
</div> <!-- end of id=layout -->
<!-- for collapse functionality -->
<script src="/libs/collapse/collapse.js"></script>
<script src="/libs/pure/ui.min.js"></script>
<!-- head and footer-nav -->
<script src="/libs/nav/head.js"  type="module"></script>
<!-- landing page -->
<script src="/libs/landing/landing.js"></script>
<!-- navigation bar -->
<script src="/libs/nav/nav.js"></script>
<!-- responsive navigation bar -->
<script src="/libs/nav/responsive.js"></script>


<script src="/libs/highlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();hljs.configure({tabReplace: '    '});</script>


</body>

</html>