<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/MLJTutorials/libs/highlight/github.min.css"> <link rel=stylesheet  href="/MLJTutorials/css/franklin.css"> <link rel=stylesheet  href="/MLJTutorials/css/pure.css"> <link rel=stylesheet  href="/MLJTutorials/css/side-menu.css"> <link rel=stylesheet  href="/MLJTutorials/css/extra.css"> <title>Handling categorical data</title> <script src="/MLJTutorials/libs/lunr/lunr.min.js"></script> <script src="/MLJTutorials/libs/lunr/lunr_index.js"></script> <script src="/MLJTutorials/libs/lunr/lunrclient.min.js"></script> <div id=layout > <a href="#menu" id=menuLink  class=menu-link ><span></span></a> <div id=menu > <div class=pure-menu > <a href="/MLJTutorials/" id=menu-logo-link > <div class=menu-logo > <img id=menu-logo  alt="MLJ Logo" src="/MLJTutorials/assets/infra/MLJLogo2.svg" /> <p><strong>MLJ Tutorials</strong></p> </div> </a> <form id=lunrSearchForm  name=lunrSearchForm > <input class=search-input  name=q  placeholder="Enter search term" type=text > <input type=submit  value=Search  formaction="/MLJTutorials/search/index.html" style="visibility:hidden"> </form> <ul class=pure-menu-list > <li class="pure-menu-item pure-menu-top-item "><a href="/MLJTutorials/" class=pure-menu-link ><strong>Home</strong></a> <li class=pure-menu-sublist-title ><strong>Data basics</strong> <ul class=pure-menu-sublist > <li class="pure-menu-item "><a href="/MLJTutorials/data/loading/" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Loading data</a> <li class="pure-menu-item "><a href="/MLJTutorials/data/dataframe/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Data Frames</a> <li class="pure-menu-item "><a href="/MLJTutorials/data/categorical/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Categorical Arrays</a> <li class="pure-menu-item "><a href="/MLJTutorials/data/scitype/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Scientific Type</a> </ul> <li class=pure-menu-sublist-title ><strong>Getting started</strong> <ul class=pure-menu-sublist > <li class="pure-menu-item "><a href="/MLJTutorials/getting-started/choosing-a-model/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Choosing a model</a> <li class="pure-menu-item "><a href="/MLJTutorials/getting-started/fit-and-predict/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Fit, predict, transform</a> <li class="pure-menu-item "><a href="/MLJTutorials/getting-started/model-tuning/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Model tuning</a> <li class="pure-menu-item "><a href="/MLJTutorials/getting-started/ensembles/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Ensembles</a> <li class="pure-menu-item "><a href="/MLJTutorials/getting-started/ensembles-2/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Ensembles (2)</a> <li class="pure-menu-item "><a href="/MLJTutorials/getting-started/ensembles-3/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Ensembles (3)</a> <li class="pure-menu-item "><a href="/MLJTutorials/getting-started/composing-models/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Composing models</a> <li class="pure-menu-item "><a href="/MLJTutorials/getting-started/learning-networks/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Learning networks</a> <li class="pure-menu-item "><a href="/MLJTutorials/getting-started/learning-networks-2/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Learning networks (2)</a> <li class="pure-menu-item "><a href="/MLJTutorials/getting-started/stacking/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Stacking</a> </ul> <li class=pure-menu-sublist-title ><strong>Intro to Stats Learning</strong> <ul class=pure-menu-sublist  id=isl> <li class="pure-menu-item "><a href="/MLJTutorials/isl/lab-2/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Lab 2</a> <li class="pure-menu-item "><a href="/MLJTutorials/isl/lab-3/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Lab 3</a> <li class="pure-menu-item "><a href="/MLJTutorials/isl/lab-4/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Lab 4</a> <li class="pure-menu-item "><a href="/MLJTutorials/isl/lab-5/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Lab 5</a> <li class="pure-menu-item "><a href="/MLJTutorials/isl/lab-6b/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Lab 6b</a> <li class="pure-menu-item "><a href="/MLJTutorials/isl/lab-8/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Lab 8</a> <li class="pure-menu-item "><a href="/MLJTutorials/isl/lab-9/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Lab 9</a> <li class="pure-menu-item "><a href="/MLJTutorials/isl/lab-10/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Lab 10</a> </ul> <li class=pure-menu-sublist-title ><strong>End to end examples</strong> <ul class=pure-menu-sublist  id=e2e> <li class="pure-menu-item "><a href="/MLJTutorials/end-to-end/AMES/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> AMES</a> <li class="pure-menu-item "><a href="/MLJTutorials/end-to-end/wine/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Wine</a> <li class="pure-menu-item "><a href="/MLJTutorials/end-to-end/crabs-xgb/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Crabs (XGB)</a> <li class="pure-menu-item "><a href="/MLJTutorials/end-to-end/horse/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> Horse</a> <li class="pure-menu-item "><a href="/MLJTutorials/end-to-end/HouseKingCounty/index.html" class=pure-menu-link ><span style="padding-right:0.5rem;">•</span> King County Houses</a> </ul> </ul> </div> </div> <div id=main > <div class=franklin-content > <h1 id=handling_categorical_data ><a href="#handling_categorical_data">Handling categorical data</a></h1> <em>Download the</em> <a href="https://raw.githubusercontent.com/alan-turing-institute/MLJTutorials/gh-pages/generated/notebooks/D0-categorical.ipynb" target=_blank ><em>notebook</em></a>, <em>the</em> <a href="https://raw.githubusercontent.com/alan-turing-institute/MLJTutorials/gh-pages/generated/scripts/D0-categorical-raw.jl" target=_blank ><em>raw script</em></a>, <em>or the</em> <a href="https://raw.githubusercontent.com/alan-turing-institute/MLJTutorials/gh-pages/generated/scripts/D0-categorical.jl" target=_blank ><em>annotated script</em></a> <em>for this tutorial &#40;right-click on the link and save&#41;.</em> <div class=franklin-toc ><ol><li><a href="#defining_a_categorical_vector">Defining a categorical vector</a><li><a href="#working_with_categoricals">Working with categoricals</a><ol><li><a href="#ordered_categoricals">Ordered categoricals</a><li><a href="#missing_values">Missing values</a></ol></ol></div>This tutorial follows loosely <a href="https://juliadata.github.io/CategoricalArrays.jl/latest/using.html">the docs</a>.</p> <h2 id=defining_a_categorical_vector ><a href="#defining_a_categorical_vector">Defining a categorical vector</a></h2> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> CategoricalArrays

v = categorical([<span class=hljs-string >"AA"</span>, <span class=hljs-string >"BB"</span>, <span class=hljs-string >"CC"</span>, <span class=hljs-string >"AA"</span>, <span class=hljs-string >"BB"</span>, <span class=hljs-string >"CC"</span>])</code></pre><pre><code class="plaintext hljs">6-element CategoricalArrays.CategoricalArray{String,1,UInt32}:
 "AA"
 "BB"
 "CC"
 "AA"
 "BB"
 "CC"</code></pre> <p>This declares a categorical vector, i.e. a Vector whose entries are expected to represent a group or category. You can retrieve the group labels using <code>levels</code>:</p> <pre><code class="julia hljs">levels(v)</code></pre><pre><code class="plaintext hljs">3-element Array{String,1}:
 "AA"
 "BB"
 "CC"</code></pre> <p>which, by default, returns the labels in lexicographic order.</p> <h2 id=working_with_categoricals ><a href="#working_with_categoricals">Working with categoricals</a></h2> <h3 id=ordered_categoricals ><a href="#ordered_categoricals">Ordered categoricals</a></h3> <p>You can specify that categories are <em>ordered</em> by specifying <code>ordered&#61;true</code>, the order then follows that of the levels. If you wish to change that order, you need to use the <code>levels&#33;</code> function. Let&#39;s see two examples.</p> <pre><code class="julia hljs">v = categorical([<span class=hljs-number >1</span>, <span class=hljs-number >2</span>, <span class=hljs-number >3</span>, <span class=hljs-number >1</span>, <span class=hljs-number >2</span>, <span class=hljs-number >3</span>, <span class=hljs-number >1</span>, <span class=hljs-number >2</span>, <span class=hljs-number >3</span>], ordered=<span class=hljs-literal >true</span>)

levels(v)</code></pre><pre><code class="plaintext hljs">3-element Array{Int64,1}:
 1
 2
 3</code></pre> <p>Here the lexicographic order matches what we want so no need to change it, since we&#39;ve specified that the categories are ordered we can do:</p> <pre><code class="julia hljs">v[<span class=hljs-number >1</span>] &lt; v[<span class=hljs-number >2</span>]</code></pre><pre><code class="plaintext hljs">true</code></pre>
<p>Let&#39;s now consider another example</p>
<pre><code class="julia hljs">v = categorical([<span class=hljs-string >"high"</span>, <span class=hljs-string >"med"</span>, <span class=hljs-string >"low"</span>, <span class=hljs-string >"high"</span>, <span class=hljs-string >"med"</span>, <span class=hljs-string >"low"</span>], ordered=<span class=hljs-literal >true</span>)

levels(v)</code></pre><pre><code class="plaintext hljs">3-element Array{String,1}:
 "high"
 "low"
 "med"</code></pre>
<p>The levels follow the lexicographic order which  is not what  we want:</p>
<pre><code class="julia hljs">v[<span class=hljs-number >1</span>] &lt; v[<span class=hljs-number >2</span>]</code></pre><pre><code class="plaintext hljs">true</code></pre>
<p>In order to re-specify the order we need to  use <code>levels&#33;</code>:</p>
<pre><code class="julia hljs">levels!(v, [<span class=hljs-string >"low"</span>, <span class=hljs-string >"med"</span>, <span class=hljs-string >"high"</span>])</code></pre><pre><code class="plaintext hljs">6-element CategoricalArrays.CategoricalArray{String,1,UInt32}:
 "high"
 "med"
 "low"
 "high"
 "med"
 "low"</code></pre>
<p>now things are properly ordered:</p>
<pre><code class="julia hljs">v[<span class=hljs-number >1</span>] &lt; v[<span class=hljs-number >2</span>]</code></pre><pre><code class="plaintext hljs">false</code></pre>
<h3 id=missing_values ><a href="#missing_values">Missing values</a></h3>
<p>You can also have a categorical vector with missing values:</p>
<pre><code class="julia hljs">v = categorical([<span class=hljs-string >"AA"</span>, <span class=hljs-string >"BB"</span>, missing, <span class=hljs-string >"AA"</span>, <span class=hljs-string >"BB"</span>, <span class=hljs-string >"CC"</span>]);</code></pre>
<p>that doesn&#39;t change the levels:</p>
<pre><code class="julia hljs">levels(v)</code></pre><pre><code class="plaintext hljs">3-element Array{String,1}:
 "AA"
 "BB"
 "CC"</code></pre>
<div class=page-foot >
  <div class=copyright >
    &copy; Anthony Blaom, Thibaut Lienart and collaborators. Last modified: February 19, 2020. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a>.
  </div>
</div>

</div>

      </div> 
  </div> 
  <script src="/MLJTutorials/libs/pure/ui.min.js"></script>